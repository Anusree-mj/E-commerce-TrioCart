<link rel="stylesheet" href="/stylesheets/users/profile.css">
<%- include('../partials/homeHeader',{ totalCartProduct: totalCartProduct}) %>
    <%- include('../partials/subHeader',allCategories) %>

        <section class="profilepage">
            <div class="pageHead">
                <h2>Your profile</h2>
                <p>You can manage your profile here</p>
                <hr>
            </div>
            <div class="profilecontainer">
                <div class="mydetailSctn">
                    <div class="d-flex justify-content-between">
                        <p class="subHead">My details</p>
                        <p class="edit" onclick="editMyDetails()">Edit</a>
                    </div>
                    <div class="readonlyDetails">
                        <p class="mt-2">Name</p>
                        <p class="userDetail">
                            <%= user.name %>
                        </p>
                        <p class="mt-2">Phone</p>
                        <p class="userDetail">
                            <%= user.phone %>
                        </p>
                        <p class="mt-2">Email</p>
                        <p class="userDetail">
                            <%= user.email %>
                        </p>
                    </div>
                    <hr><br>
                    <!-- editing mydetails -->
                    <div class="editableDetails" style="display: none;">
                        <p class="subHeadEdit">Edit your Details</p>
                        <label class="label mt-3" for="name">Name<span class="required">*</span></label>
                        <input type="text" class="form-control" name="name" id="name" placeholder="Enter your name"
                            onclick="clearSpan('nameSpan')" onblur="checkName()" value="<%= user.name %>">
                        <span id="nameSpan" class="span"></span><br>

                        <label class="label" for="email">Email<span class="required">*</span></label>
                        <input type="email" class="form-control" name="email" id="email" placeholder="Enter you email"
                            onclick="clearSpan('emailSpan')" onblur="checkEmail()" value=" <%= user.email %>">
                        <span id="emailSpan" class="span"></span><br>

                        <label class="label" for="phone">Phone number<span class="required">*</span></label>
                        <input type="text" class="form-control" name="phone" id="phone"
                            placeholder="Enter your contact number" onclick="clearSpan('phoneSpan')"
                            onblur="checkPhone()" value="<%= user.phone %>">
                        <span id="phoneSpan" class="span"></span><br>
                        <div class="d-flex flex-column justify-content-center align-items-center">
                            <button type="button" class="btn btn-dark save "
                                onclick="updateMyDetails('<%= user._id %>')">Save</button>
                            <a href="/profile" type="button" class="btn btn-outline-dark save mt-3">Cancel</a>
                        </div>
                    </div>

                </div>
            </div>
            <div class="profilecontainer mt-4">
                <div class="mydetailSctn">
                    <p class="subHead">Address Book</p>
                    <div class="readonly">
                        <% user.billingAddress.forEach(address=> { %>
                            <div class="readonly mt-4">
                                <div class="d-flex flex-column">
                                    <div class="d-flex justify-content-between">
                                        <p>
                                            Name: <%= address.name %>
                                        </p>
                                        <div>
                                            <img src="/images/navbar/edit.png" style="width: 1rem;" alt="edit"
                                                onclick="editBillingAdress('<%= address._id %>')">
                                            <img src="/images/navbar/delete.png" style="width: 1rem;" alt="edit"
                                                class="ml-4" onclick="deleteBillingAdress('<%= address._id %>')">
                                        </div>
                                    </div>
                                    <p class="normalTxt">Phone: <%= address.phone %>
                                    </p>
                                    <p class="normalTxt">Address: <%= address.address %>
                                    </p>
                                    <p class="normalTxt">Town/City: <%= address.town %>
                                    </p>
                                    <p class="normalTxt">Pincode: <%= address.pincode %>
                                    </p>
                                    <p class="normalTxt">State: <%= address.state %>
                                    </p>
                                </div>
                            </div>
                            <% }) %>
                    </div>  <hr><br>                  

                   <!-- edit billingaddress -->
                   <div class="editable" style="display: none;">
                    <p class="darkHeads">Enter your billing address</p>
                    <div>
                        <label class="mt-3 label" for="name">Name <span
                                class="required">*</span></label>
                        <input onclick="clearSpan('name_editSpan');clearValidity('name_edit')"
                            onblur="ifValid('name_edit')" type="text" id="name_edit" class="form-control"
                            name="'name" aria-describedby="addressHelpBlock">
                        <span id="name_editSpan" class="span"></span><br>

                        <!-- phone -->
                        <label class="label" for="phone">Phone number <span
                                class="required">*</span></label>
                        <input type="text" class="form-control" name="phone" id="phone_edit"
                            onclick="clearSpan('phone_editSpan');clearValidity('phone_edit')"
                            onblur="checkPhone()">
                        <span id="phone_editSpan" class="span"></span><br>

                        <!-- address -->
                        <label class="label" for="address">Address <span
                                class="required">*</span></label>
                        <input onclick="clearSpan('address_editSpan');clearValidity('address_edit')"
                            onblur="checkAddress()" type="text" id="address_edit"
                            class="form-control" name="address" aria-describedby="addressHelpBlock">
                        <div class="d-flex flex-column">
                            <small class="form-text text-muted">
                                Street address
                            </small>
                            <span id="address_editSpan" class="span"></span>
                        </div>

                        <!-- town/city -->
                        <label class="mt-3 label" for="town">Town/City <span
                                class="required">*</span></label>
                        <input onclick="clearSpan('town_editSpan');clearValidity('town_edit')"
                            onblur="ifValid('town_edit')" type="text" id="town_edit" class="form-control"
                            name="town" aria-describedby="passwordHelpBlock">
                        <div class="d-flex flex-column">
                            <small class="form-text text-muted">
                                Enter a town/city
                            </small>
                            <span id="town_editSpan" class="span"></span>
                        </div>


                        <!-- pincode -->
                        <label class="mt-3 label" for="pincode">Pincode <span
                                class="required">*</span></label>
                        <input onclick="clearSpan('pincode_editSpan');clearValidity('pincode_edit')"
                            onblur="checkPincode()" type="text" id="pincode_edit"
                            class="form-control" name="pincode"
                            aria-describedby="passwordHelpBlock">

                        <div class="d-flex flex-column">
                            <small id="pincodeMute" class="form-text text-muted">
                                Please enter a pincode (400070)
                            </small>
                            <span id="pincode_editSpan" class="span"></span>
                        </div>
                        <!--  -->
                        <label class="mt-3 label" for="state">State <span
                                class="required">*</span></label>
                        <select name="state" id="state_edit" class="form-control" value>
                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                            <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands
                            </option>
                            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                            <option value="Assam">Assam</option>
                            <option value="Bihar">Bihar</option>
                            <option value="Chandigarh">Chandigarh</option>
                            <option value="Chhattisgarh">Chhattisgarh</option>
                            <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                            <option value="Daman and Diu">Daman and Diu</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Lakshadweep">Lakshadweep</option>
                            <option value="Puducherry">Puducherry</option>
                            <option value="Goa">Goa</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="Haryana">Haryana</option>
                            <option value="Himachal Pradesh">Himachal Pradesh</option>
                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                            <option value="Jharkhand">Jharkhand</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Kerala">Kerala</option>
                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Manipur">Manipur</option>
                            <option value="Meghalaya">Meghalaya</option>
                            <option value="Mizoram">Mizoram</option>
                            <option value="Nagaland">Nagaland</option>
                            <option value="Odisha">Odisha</option>
                            <option value="Punjab">Punjab</option>
                            <option value="Rajasthan">Rajasthan</option>
                            <option value="Sikkim">Sikkim</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="Telangana">Telangana</option>
                            <option value="Tripura">Tripura</option>
                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                            <option value="Uttarakhand">Uttarakhand</option>
                            <option value="West Bengal">West Bengal</option>
                        </select>
                    </div>
                    <div class="d-flex flex-column justify-content-center align-items-center">
                        <button type="button" class="btn btn-dark save"
                            onclick="updateBillingAddress()">Save</button>
                            <a href="/profile" type="button" class="btn btn-outline-dark save mt-3">Cancel</a>
                    </div>
                </div>

                </div>
            </div>

            <div class="profilecontainer mt-4">
                <div class="mydetailSctn">
                    <p class="subHead">Privacy</p>
                    <p class="edit" id="changePassword" onclick="getPasswordChange()">Change password</a>
                        <hr>
                        <!-- change password -->
                    <div class="editablePassword" style="display: none;">
                        <p class="subHeadEdit">Change Password</p>
                        <div class="password-box">
                            <label class="label mt-3">
                                Current Password <span class="required">*</span>
                            </label>
                            <input type="password" class=" form-control" id="currntPassword"
                                placeholder="Enter your password" onclick="clearSpan('currntPasswordSpan')">
                            <span id="currntPasswordSpan" class="span"></span>
                            <button class="currntShow" type="button" id="currntPasswordToggle"
                                onclick="togglePassword('currntPassword')">Show</button>
                        </div>

                        <div class="password-box">
                            <label class="label mt-2">
                                Password <span class="required">*</span>
                            </label>
                            <input type="password" class=" form-control" id="password" placeholder="Enter your password"
                                onclick="clearSpan('passwordSpan')" onblur="isStrongPaswrd()">
                            <span id="passwordSpan" class="span"></span>
                            <button class="signupShow" type="button" id="passwordToggle"
                                onclick="togglePassword('password')">Show</button>
                        </div>

                        <!-- confirm password -->
                        <label class="label mt-2">
                            Confirm Password <span class="required">*</span>
                        </label>
                        <input type="password" class=" form-control" id="confrmPsswrd" aria-describedby="emailHelp"
                            placeholder=" Confirm password" onclick="clearSpan('confrmPsswrdSpan')">
                        <span id="confrmPsswrdSpan" class="span"></span>

                        <div class="d-flex flex-column justify-content-center align-items-center">
                            <button type="button" class="btn btn-dark save" onclick="changePassword(' <%= user._id %>')">Change</button>
                            <a href="/profile" type="button" class="btn btn-outline-dark save mt-3">Cancel</a>
                        </div>
                    </div>
                </div>
            </div>

            <br><br><br><br>
        </section>
        <%- include('../partials/footer') %>
            <script src="/javascripts/users/profile.js"></script>
            <script src="/javascripts/users/checkout.js"></script>